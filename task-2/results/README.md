## 1) Рекомендуемое решение

Для кейса **“каждое утро в 06:00 выгрузить CSV/XLS без сложной логики, объём до 10k строк, микросервисы в облаке (k8s)”** оптимально:

### Kubernetes **CronJob** + небольшой контейнер-экспортёр + Object Storage

Почему:

- самый простой путь для регулярной пакетной задачи без сложной оркестрации;
- минимальная ресурсность и операционная нагрузка;
- “нативно” для k8s-инфры (в описании задачи сказано, что микросервисы уже там);
- легко покрывается логированием/метриками (Prometheus/Grafana, ELK);
- Airflow/Spring Batch/Spark будут **оверкиллом** для простой выгрузки.

---

## 2) Таблица сравнения

| Критерий                                                       | Spring Batch                                                     | Apache Airflow                               | K8s CronJob                                                                  | Spark                                      |
| -------------------------------------------------------------- | ---------------------------------------------------------------- | -------------------------------------------- | ---------------------------------------------------------------------------- | ------------------------------------------ |
| Наличие CRON-расписания                                        | Через внешний scheduler / k8s/jenkins; не “нативно” в фреймворке | Есть расписания, UI                          | **Нативно:** `schedule: "0 6 * * *"`                                         | Обычно через внешний оркестратор           |
| Сложность реализации логики обработки                          | Средняя/высокая (job/step, инфраструктурные концепты)            | Средняя (DAG)                                | **Низкая:** 1 сервис/скрипт                                                  | Высокая, оправдана для больших объёмов/ETL |
| Ресурсоёмкость                                                 | Средняя (приложение + окружение)                                 | **Высокая:** webserver/scheduler/metadata DB | **Низкая:** один Pod по расписанию                                           | Высокая (кластер/драйвер/экзекьюторы)      |
| Масштабируемость под нагрузкой и сложность                     | Хорошо масштабируется, но сложнее поддержка                      | Хорошая, но дорого по инфраструктуре         | Достаточно: можно параллелить по клиентам/шардам; HPA не нужен, т.к. CronJob | Отлично, но слишком тяжело для 10k строк   |
| Сложность развёртывания в облаке и интеграции с микросервисами | Средняя: нужен сервис/образ/конфиги                              | Высокая: Airflow-кластер/хранилища/операция  | **Низкая:** манифест CronJob + секреты + образ                               | Высокая: Spark on K8s/managed service      |
| Интеграция с логированием и мониторингом                       | Нормально (логгер/метрики)                                       | Хорошо (UI/логи/метрики), но “вес”           | **Отлично:** stdout→ELK, метрики→Prometheus, алерты→Alertmanager             | Хорошо, но сложнее эксплуатация            |

### Вывод

Так как **доп. логики нет**, объём небольшой (**5–10k строк**), запуск строго по расписанию (**06:00**), а инфраструктура уже **k8s**, то **Kubernetes CronJob** — наиболее рациональный выбор по простоте, стоимости владения и скорости реализации.
